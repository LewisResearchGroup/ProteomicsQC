{% extends "base.html" %}

{% block content %}
    {% include 'proteomics/include/pipeline_head.html' with project=project %}

    <div id="upload-raw" class="pipeline-upload">
      <input id="fileupload" type="file" name="orig_file" multiple
             style="display: none;"
             data-url="{% url 'maxquant:basic_upload' %}"
             data-form-data='{"csrfmiddlewaretoken": "{{ csrf_token }}", "pipeline": "{{ pipeline.pk }}"}'>

      <div class="upload-queue" id="upload-queue">
        <div class="upload-queue-cta">
          <div class="upload-queue-cta-text">
            <strong>Add .raw files</strong>
            <span>Drop files here or use the button to add them to the queue.</span>
          </div>
          <button type="button" class="btn run-btn run-btn-primary js-upload-photos upload-queue-add-btn">
            upload .raw
          </button>
        </div>
        <div id="upload-feedback" class="upload-feedback" aria-live="polite"></div>
        <div class="upload-queue-head">
          <strong>Upload queue</strong>
          <span id="upload-queue-count">0 files</span>
        </div>
        <div class="upload-queue-table-wrap">
          <table class="upload-queue-table">
            <thead>
              <tr>
                <th>File</th>
                <th>Size</th>
                <th>Progress</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="upload-queue-body">
              <tr id="upload-queue-empty">
                <td colspan="4">No active uploads.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="modal fade" id="modal-progress" data-backdrop="static" data-keyboard="false">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Uploading...</h4>
          </div>
          <div class="modal-body">
            <div class="progress">
              <div class="progress-bar" role="progressbar" style="width: 0%;">0%</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div style='margin-top: 50px'>
      {% include 'proteomics/include/list_mq_runs.html' with maxquant_runs=maxquant_runs %}
    </div>

    {% if maxquant_runs.has_other_pages %}
    <div class="block raw-files-pagination">
      <ul class="pagination">
        {% if maxquant_runs.has_previous %}
        <li><a href="?page={{ maxquant_runs.previous_page_number }}">&laquo;</a></li>
        {% else %}
        <li class="disabled"><span>&laquo;</span></li>
        {% endif %}
        {% for i in maxquant_runs.paginator.page_range %}
        {% if maxquant_runs.number == i %}
            <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
        {% else %}
            <li><a href="?page={{ i }}">{{ i }}</a></li>
        {% endif %}
        {% endfor %}
        {% if maxquant_runs.has_next %}
        <li><a href="?page={{ maxquant_runs.next_page_number }}">&raquo;</a></li>
        {% else %}
        <li class="disabled"><span>&raquo;</span></li>
        {% endif %}
      </ul>
    </div>
    {% endif %}
{% endblock %}
